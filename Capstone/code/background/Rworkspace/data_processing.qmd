---
title: "data_cleaning"
format: html
editor: visual
---

<!-- installing libraries -->

```{r, message=FALSE}
library(readr)
library(dplyr)
library(tidyr)
library(tidyverse)
library(vdemdata)
library(ggplot2)
```
<!-- dataset -->
```{r, message=FALSE}
vdemfull <- vdemdata::vdem
#vdemfull$year <- as.factor(vdemfull$year)
map <- map_data("world")
onlycountries <- vdemfull[-c(25990:27555), ]
```

<!-- womens empowerment variables -->

```{r}
allwemp <- onlycountries %>% select(region = country_name, abbr = country_text_id, id = country_id, year = year, wpei = v2x_gender, liberties = v2x_gencl, society = v2x_gencs, participation = v2x_genpp)
wemp100yr <- filter(allwemp, year >= 1900, year <= 2001)
mapwemp <- left_join(map, wemp100yr, by = "region")
```

<!-- voting rights -->

```{r}
allvoting <- onlycountries %>% select(region = country_name, abbr = country_text_id, id = country_id, year = year, voting = v2fsuffrage)
voting100yr <- filter(allvoting, year >1899, year <2001)
voting100yr <- voting100yr %>% mutate(voting = ifelse(is.na(voting), 0, voting))
mapvote <- left_join(voting100yr, map, by = "region")
vote1900 <- filter(allvoting, year == 1900)
mapvote1900 <- left_join(vote1900, map, by = "region")
vote1950 <- filter(allvoting, year == 1950)
mapvote1950 <- left_join(vote1950, map, by = "region")
vote2000 <- filter(allvoting, year == 2000)
mapvote2000 <- left_join(vote2000, map, by = "region")
```

<!-- creating a csv file of cleaned data -->

```{r}
#write.csv(wemp100yr, 'wemp100yr.csv')
#write.csv(voting100yr, 'voting100yr.csv')
```

<!-- suffrage map -->
```{r, message=FALSE}
#basemap
ggplot() + geom_map(data = map, map = map, aes(long, lat, map_id = region))
#1900 map
ggplot() + geom_map(data = mapvote1900, map = mapvote1900, aes(long, lat, map_id = region), fill = "purple")
#1950 map
ggplot() + geom_map(data = mapvote1950, map = mapvote1900, aes(long, lat, map_id = region), fill = "purple")
#2000 map
ggplot() + geom_map(data = mapvote2000, map = mapvote2000, aes(long, lat, map_id = region), fill = "purple")
```

